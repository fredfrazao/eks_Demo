name: 'docs-Terraform'

on:
  workflow_dispatch:

permissions:
  contents: read

jobs:
  terraform:
    name: 'docs Terraform'
    runs-on: ubuntu-latest
    environment: "CI"

    # Use the Bash shell regardless whether the GitHub Actions runner is ubuntu-latest, macos-latest, or windows-latest
    defaults:
      run:
        shell: bash

    steps:
    
    # Checkout the repository to the GitHub Actions runner
    - name: Checkout
      uses: actions/checkout@v3
      
    - name: generate docs
      uses: Dirrk/terraform-docs@v1.0.8
      with:
        tf_docs_working_dir: . 
        tf_docs_output_file:  USAGE.md 
        tf_docs_git_commit_message: automated action 
  
    
      
    - name: Terraform-Lint
      uses: actionshub/terraform-lint@1.0.0
