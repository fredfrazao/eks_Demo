#jinja2: trim_blocks: True, lstrip_blocks: True
# {{ ansible_managed }}
# Generated from 'kubernetes-system-scheduler' group
# Do not change in-place! In order to change this file first read following link:
# https://git.daimler.com/CCP/platform-infrastructure/tree/master/scripts/prometheus-rules-generator.py
---
apiVersion: monitoring.coreos.com/v1
kind: PrometheusRule
metadata:
  name: "kubernetes-system-scheduler"
  namespace: {{ k8s_namespace }}
spec:
{% if not prometheus_rules.kubeScheduler %}
  groups: []
{% else %}
  groups:
  - name: kubernetes-system-scheduler
    rules:
    {% if prometheus_alerts.kubeSchedulerDown %}
    - alert: KubeSchedulerDown
      annotations:
        description: KubeScheduler has disappeared from Prometheus target discovery.
        runbook_url: https://runbooks.prometheus-operator.dev/runbooks/kubernetes/kubeschedulerdown
        summary: Target disappeared from Prometheus target discovery.
      expr: absent(up{job="{{ prometheus_operator_chart_release_name }}-kube-scheduler"} == 1)
      for: 15m
      labels:
        severity: critical
        notify_team: {{ prometheus_alert_teams.barekube }}
    {% endif %}
{% endif %}
