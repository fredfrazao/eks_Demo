{% if prometheus_monitor_components.external.computeNodes  %}
  {% if groups['compute_node'] is defined and (groups['compute_node'] | length > 0) %}
- job_name: "ssl-kubernetes-file"
  honor_labels: true
  metrics_path: /probe
  static_configs:
    - targets:
    {% for host in groups['compute_node'] %}
      - {{ hostvars[host].metrics_exporter_ip +":"+(ssl_exporter_port | string) }}
    {% endfor %}
  params:
    module: ["file"]
    target:
      - /etc/kubernetes/pki/*.crt
- job_name: "ssl-etcd-k8s-file"
  honor_labels: true
  metrics_path: /probe
  static_configs:
    - targets:
    {% for host in groups['compute_node'] %}
      - {{ hostvars[host].metrics_exporter_ip +":"+(ssl_exporter_port | string) }}
    {% endfor %}
  params:
    module: ["file"]
    target:
      - /etc/etcd/k8s/ssl/*.pem
  {% endif %}
{% endif %}
